<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Todo List</title>
  <link rel="stylesheet" type="text/css" href="./style.css">
</head>
<body>
  <header>
		<div class="pageTitle">
			<div class="logo-mini">
				<img src="UntitleLogo.png">
			</div>
			<div class="title">
				<h2>Un-title Todo</h2>
			</div>
		</div>
  </header>
  <section>
    <div class="content" id="study">
			<div class="category">
				<div class="title">ì „ê³µ ê³µë¶€ ğŸ«</div>
			</div>
			<div class="todo">
				<div class="li">
					<input type="checkbox" name="check1" value="1"><label for="check1"> ì»´ì‹œê°œ 7ì£¼ì°¨ ê°•ì˜ ë“£ê¸°</label><br/>
				</div>
				<div class="li">
					<input type="checkbox" name="check2" value="2"><label for="check2"> ì»´ì‹œê°œ 8ì£¼ì°¨ ê°•ì˜ ë“£ê¸°</label><br/>
				</div>
				<div class="li">
					<input type="checkbox" name="check3" value="3"><label for="check3"> ì»´ì‹œê°œ 9ì£¼ì°¨ ê°•ì˜ ë“£ê¸°</label><br/>
				</div>
				<div class="li">
					<input type="checkbox" name="check4" value="4"><label for="check4"> ì»´ì‹œê°œ 10ì£¼ì°¨ ê°•ì˜ ë“£ê¸°</label><br/>
				</div>
			</div>
		</div>
		<div class="inputForm">
			<p><input type="text" id="title" name="title" placeholder="ì œëª©"></p>
      <p><input type="text" id="list" name="list" placeholder="ë‚´ìš©" onkeypress="enterKey(event)"></p>
		</div>
  </section>
	<script type="text/javascript">
		const token = localStorage.getItem('login_token') || '';
		
		//get ë°›ì•„ì™€ì„œ data ë„£ê¸°
		fetch("http://127.0.0.1:8080/todos", {
				method: "GET",
				headers: {
					"Content-Type": "application/json",
					Authorization:token,
				},
			}).then((response) => response.json())
				.then((data) => {
					console.log("Get");
					console.log(data);
					// ë³€ìˆ˜ ì´ë¦„ ìˆ˜ì •
					let titleGet = "";
					let contentGet = "";
					var dataArr = JSON.stringify(data);
					console.log("1: "+ dataArr);
					// const result = data.map((oneDB)=>{
					// 	titleGet = oneDB.title;
					// 	contentGet = oneDB.contentGet;
					// 	console.log(titleGet + " : " + contentGet);
					// 	const id = document.getElementById("study");
					// 	id.createTextNode(`
					// 	<div class="li">
					// 		<input type="checkbox" name="check1" value="1"><label for="check1"> ì»´ì‹œê°œ 7ì£¼ì°¨ ê°•ì˜ ë“£ê¸°</label><br/>
					// 	</div>
					// 	`);
    			// 	return 0;
					// });	
			});
		
		// POST (ì„œë²„ë¡œ todo ì „ì†¡)
		function enterKey(e) {
			const code = e.code;
			let title = document.getElementById("title").value;
			let list = document.getElementById("list").value;
			if(code == 'Enter') {
				//console.log("console í´ë¦­"+token);
				fetch("http://127.0.0.1:8080/todos", {
				method: "POST",
				headers: {
					"Content-Type": "application/json",
					Authorization:token,
				},
				body: JSON.stringify({
					title: title,
					content: list,
				}),
			}).then((response) => response.json())
				.then((data) => {
				console.log("POST");
				console.log(data);
				console.log(title+" : "+list)
			});
			//get ë°›ì•„ì™€ì„œ data ë„£ê¸°
			fetch("http://127.0.0.1:8080/todos", {
					method: "GET",
					headers: {
						"Content-Type": "application/json",
						Authorization:token,
					},
				}).then((response) => response.json())
					.then((data) => {
						console.log("Get");
						console.log(data);
						// ë³€ìˆ˜ ì´ë¦„ ìˆ˜ì •
						let titleGet = "";
						let contentGet = "";
						// const result = data.map((oneDB)=>{
						// 	titleGet = oneDB.title;
						// 	contentGet = oneDB.contentGet;
						// 	console.log(titleGet + " : " + contentGet);
						// 	const id = document.getElementById("study");
						// 	id.createTextNode(`
						// 	<div class="li">
						// 		<input type="checkbox" name="check1" value="1"><label for="check1"> ì»´ì‹œê°œ 7ì£¼ì°¨ ê°•ì˜ ë“£ê¸°</label><br/>
						// 	</div>
						// 	`);
						// 	return 0;
						// });	
				});
			}
		}
	</script>
</body>
</html>